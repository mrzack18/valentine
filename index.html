<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Valentine buat Pitakkk  üç´</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&family=Caveat:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --choco: #4e342e; 
            --gold: #d4af37; 
            --cream: #fff8e1; 
            --soft-pink: #ffcad4;
        }
        body, html { 
            height: 100%; 
            margin: 0; 
            font-family: 'Quicksand', sans-serif; 
            background-color: var(--cream); 
            overflow: hidden; 
            touch-action: manipulation; /* Mencegah zoom yang tidak disengaja */
        }
        
        .handwritten { font-family: 'Caveat', cursive; color: var(--choco); font-size: 4rem; }

        .page-wrapper {
            display: flex;
            width: 400%; 
            height: 100%;
            transition: transform 0.8s cubic-bezier(0.65, 0, 0.35, 1);
        }

        section {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .choco-card {
            background: #ffffff;
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 15px 40px rgba(78, 52, 46, 0.15);
            max-width: 400px;
            width: 100%;
            text-align: center;
            border: 3px solid var(--choco);
            position: relative;
        }

        /* Labirin Gelap Senter */
        #gameArea {
            position: relative;
            width: 280px;
            height: 320px;
            background: #1a1a1a;
            margin: 15px auto;
            border-radius: 15px;
            overflow: hidden;
            touch-action: none; /* PENTING: Mematikan scroll saat di area game */
            background: radial-gradient(circle at var(--x, 50%) var(--y, 50%), rgba(212, 175, 55, 0.3) 0%, rgba(0,0,0,1) 15%);
        }

        .wall {
            position: absolute;
            background: rgba(78, 52, 46, 0.1); 
            z-index: 5;
        }

        #player {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--gold);
            border-radius: 3px;
            z-index: 10;
            display: none;
            box-shadow: 0 0 10px var(--gold);
            pointer-events: none;
        }

        .zone {
            position: absolute; padding: 10px; font-size: 11px; font-weight: bold; z-index: 20;
        }
        #startZone { left: 0; top: 0; background: var(--choco); color: white; }
        #finishZone { right: 0; bottom: 0; background: var(--gold); color: white; }

        .btn-choco {
            background-color: var(--choco);
            color: white;
            border-radius: 15px;
            padding: 12px 35px;
            border: none;
            font-weight: 600;
            margin-top: 20px;
            transition: 0.3s;
        }
        .btn-choco:hover { transform: scale(1.05); background-color: #3e2723; }

        .choco-drop {
            position: fixed;
            top: -50px;
            font-size: 24px;
            z-index: 999;
            pointer-events: none;
            animation: fall linear forwards;
        }
        @keyframes fall {
            to { transform: translateY(110vh) rotate(360deg); }
        }
    </style>
</head>
<body>

<div class="page-wrapper" id="wrapper">
    
    <section>
        <div class="choco-card">
            <h1 class="handwritten">Happy Valentine..</h1>
            <p class="mt-3">Buat <b>Pitakkk </b>, orang paling manis yang aku kenal. Karena ini hari kasih sayang, aku buatin sesuatu yang (semoga) bikin kamu seneng.</p>
            <button class="btn-choco" onclick="nextPage(1)">Buka Kado ‚ú®</button>
        </div>
    </section>

    <section>
        <div class="choco-card">
            <h2 class="handwritten" style="font-size: 3rem;">Manisnya Kamu..</h2>
            <div class="mt-4">
                <p>Kalau coklat itu manis, buat aku kamu jauh lebih manis. Aku beneran bersyukur bisa sama kamu terus sampe sekarang.</p>
                <p class="mt-2 fw-bold" style="color: var(--choco);">Tetep jadi Pitakkk yang aku kenal ya? üç´</p>
            </div>
            <button class="btn-custom btn-choco" onclick="nextPage(2)">Lanjut tantangan..</button>
        </div>
    </section>

    <section>
        <div class="choco-card">
            <h3 class="fw-bold mb-2" style="color: var(--choco);">Labirin Coklat üç´</h3>
            <p class="small text-muted" style="font-size: 12px;"><b>Cara Main:</b> Tahan & geser kotak emas dari START ke FINISH. Jangan kena dinding!</p>
            
            <div id="gameArea">
                <div id="startZone" class="zone">START</div>
                <div id="finishZone" class="zone">FINISH</div>
                <div id="player"></div>

                <div class="wall" style="left: 60px; top: 0; width: 30px; height: 250px;"></div>
                <div class="wall" style="left: 130px; top: 70px; width: 30px; height: 250px;"></div>
                <div class="wall" style="left: 200px; top: 0; width: 30px; height: 250px;"></div>
            </div>
            <p id="gameMsg" class="mt-2 small fw-bold" style="color: var(--choco);">Sentuh kotak START untuk mulai!</p>
        </div>
    </section>

    <section>
        <div class="choco-card" style="border: 5px solid var(--gold);">
            <h1 class="handwritten" style="font-size: 5rem; color: var(--gold);">You Win!</h1>
            <div class="p-3 bg-light rounded-3 mt-3 border border-warning">
                <p class="mb-0">Selamat Pitakkk! Kamu berhasil ngelewatin labirinnya. Sesuai janji...</p>
                <hr>
                <h4 class="fw-bold mb-0" style="color: var(--choco);">üç´ 1 BOX COKLAT BUAT KAMU! üç´</h4>
            </div>
            <p class="mt-4 small">SS ini, terus kirim ke aku sekarang ya!<br>Selamat hari Valentine, sayang.</p>
        </div>
    </section>

</div>

<script>
    const wrapper = document.getElementById('wrapper');
    let isPlaying = false;

    function nextPage(index) {
        wrapper.style.transform = `translateX(-${index * 100}vw)`;
    }

    function createChoco() {
        const icons = ['üç´', '‚ù§Ô∏è', 'üç™', 'üç¨'];
        const drop = document.createElement('div');
        drop.className = 'choco-drop';
        drop.innerText = icons[Math.floor(Math.random() * icons.length)];
        drop.style.left = Math.random() * 100 + 'vw';
        drop.style.animationDuration = (Math.random() * 3 + 2) + 's';
        document.body.appendChild(drop);
        setTimeout(() => drop.remove(), 5000);
    }
    setInterval(createChoco, 400);

    const gameArea = document.getElementById('gameArea');
    const player = document.getElementById('player');
    const walls = document.querySelectorAll('.wall');
    const startZone = document.getElementById('startZone');
    const finishZone = document.getElementById('finishZone');

    function startGame() {
        isPlaying = true;
        player.style.display = 'block';
        document.getElementById('gameMsg').innerText = "Geser terus, jangan kena dinding!";
    }

    function resetGame() {
        if(!isPlaying) return;
        isPlaying = false;
        player.style.display = 'none';
        alert("Yah nabrak! Pelan-pelan Pitakkk, ulangi dari START ya ‚ù§Ô∏è");
        document.getElementById('gameMsg').innerText = "Sentuh START lagi untuk mengulang..";
    }

    function winGame() {
        if(isPlaying) {
            isPlaying = false;
            nextPage(3); 
        }
    }

    function handleInput(e) {
        // Mendapatkan posisi input (mouse atau touch)
        let clientX, clientY;
        if (e.type.includes('touch')) {
            clientX = e.touches[0].clientX;
            clientY = e.touches[0].clientY;
        } else {
            clientX = e.clientX;
            clientY = e.clientY;
        }

        const rect = gameArea.getBoundingClientRect();
        const x = clientX - rect.left;
        const y = clientY - rect.top;

        // Efek Senter
        gameArea.style.setProperty('--x', x + 'px');
        gameArea.style.setProperty('--y', y + 'px');

        // Deteksi Start Manual (agar lebih akurat di HP)
        const sRect = startZone.getBoundingClientRect();
        if (clientX >= sRect.left && clientX <= sRect.right && clientY >= sRect.top && clientY <= sRect.bottom) {
            if(!isPlaying) startGame();
        }

        if (!isPlaying) return;

        // Gerakkan player
        player.style.left = (x - 6) + 'px';
        player.style.top = (y - 6) + 'px';

        // Deteksi Finish
        const fRect = finishZone.getBoundingClientRect();
        if (clientX >= fRect.left && clientX <= fRect.right && clientY >= fRect.top && clientY <= fRect.bottom) {
            winGame();
        }

        // Cek Tabrakan Dinding
        walls.forEach(w => {
            const wRect = w.getBoundingClientRect();
            const pRect = player.getBoundingClientRect();

            if (pRect.left < wRect.right && pRect.right > wRect.left &&
                pRect.top < wRect.bottom && pRect.bottom > wRect.top) {
                resetGame();
            }
        });
    }

    // Listener untuk PC
    gameArea.addEventListener('mousemove', handleInput);
    
    // Listener untuk Mobile (HP)
    gameArea.addEventListener('touchstart', handleInput, {passive: false});
    gameArea.addEventListener('touchmove', (e) => {
        e.preventDefault(); // Mengunci scroll layar
        handleInput(e);
    }, {passive: false});

</script>

</body>
</html>

